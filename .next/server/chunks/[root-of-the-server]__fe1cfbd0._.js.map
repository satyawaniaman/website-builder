{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///Users/amansatyawani/Desktop/website-builder/src/inngest/client.ts"],"sourcesContent":["import { Inngest } from \"inngest\";\n\n// Create a client to send and receive events\nexport const inngest = new Inngest({ id: \"website-builder\" });\n"],"names":[],"mappings":";;;AAAA;;AAGO,MAAM,UAAU,IAAI,8VAAA,CAAA,UAAO,CAAC;IAAE,IAAI;AAAkB","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Users/amansatyawani/Desktop/website-builder/src/inngest/utils.ts"],"sourcesContent":["import Sandbox from \"@e2b/code-interpreter\";\nimport { AgentResult, TextMessage } from \"@inngest/agent-kit\";\n\nexport async function getSandbox(sandboxId: string) {\n  const sandbox = await Sandbox.connect(sandboxId);\n  if (!sandbox) {\n    throw new Error(\"Sandbox not found\");\n  }\n  return sandbox;\n}\nexport function lastAssistantTextMessageContent(result: AgentResult) {\n  const lastMessageIndex = result.output.findLastIndex(\n    (messages) => messages.role === \"assistant\",\n  );\n  const message = result.output[lastMessageIndex] as TextMessage | undefined;\n  return message?.content\n    ? typeof message.content === \"string\"\n      ? message.content\n      : message.content.map((c) => c.text).join(\"\")\n    : undefined;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAGO,eAAe,WAAW,SAAiB;IAChD,MAAM,UAAU,MAAM,yPAAA,CAAA,UAAO,CAAC,OAAO,CAAC;IACtC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AACO,SAAS,gCAAgC,MAAmB;IACjE,MAAM,mBAAmB,OAAO,MAAM,CAAC,aAAa,CAClD,CAAC,WAAa,SAAS,IAAI,KAAK;IAElC,MAAM,UAAU,OAAO,MAAM,CAAC,iBAAiB;IAC/C,OAAO,SAAS,UACZ,OAAO,QAAQ,OAAO,KAAK,WACzB,QAAQ,OAAO,GACf,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAC1C;AACN","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///Users/amansatyawani/Desktop/website-builder/src/inngest/functions.ts"],"sourcesContent":["import {\n  openai,\n  createAgent,\n  createTool,\n  createNetwork,\n} from \"@inngest/agent-kit\";\nimport { Sandbox } from \"@e2b/code-interpreter\";\n\nimport { inngest } from \"./client\";\nimport { getSandbox, lastAssistantTextMessageContent } from \"./utils\";\nimport z from \"zod\";\nimport { PROMPT } from \"@/PROMPT\";\n\nexport const helloWorld = inngest.createFunction(\n  { id: \"hello-world\" },\n  { event: \"test/hello.world\" },\n  async ({ event, step }) => {\n    const sandboxId = await step.run(\"get-sandbox-id\", async () => {\n      const sandbox = await Sandbox.create(\"website-builder-nextjs-test\");\n      return sandbox.sandboxId;\n    });\n\n    // e.g. transcript step\n    // await step.sleep(\"wait-a-moment\", \"5s\");\n\n    // Create a new agent with a system prompt (you can add optional tools, too)\n    const codeAgent = createAgent({\n      name: \"code-agent\",\n      description: \"An expert coding agent\",\n      system: PROMPT,\n      model: openai({\n        model: \"gpt-4.1\",\n        defaultParameters: {\n          temperature: 0.1, // Randomness (higher = more random)\n        },\n      }),\n      tools: [\n        createTool({\n          name: \"terminal\",\n          description: \"Use the terminal to run commands\",\n          parameters: z.object({\n            command: z.string(),\n          }),\n          handler: async ({ command }, { step }) => {\n            return await step?.run(\"terminal\", async () => {\n              const buffers = { stdout: \"\", stderr: \"\" };\n\n              try {\n                const sandbox = await getSandbox(sandboxId);\n                const result = sandbox.commands.run(command, {\n                  onStdout: (data: string) => {\n                    buffers.stdout += data;\n                  },\n                  onStderr: (data: string) => {\n                    buffers.stderr += data;\n                  },\n                });\n                return (await result).stdout;\n              } catch (e) {\n                console.error(\n                  `Command failed: ${e} \\nstdout: ${buffers.stdout}\\nstderror: ${buffers.stderr}`,\n                );\n                return `Command failed: ${e} \\nstdout: ${buffers.stdout}\\nstderror: ${buffers.stderr}`;\n              }\n            });\n          },\n        }),\n        createTool({\n          name: \"createOrUpdateFiles\",\n          description: \"Create or update files in the sandbox\",\n          parameters: z.object({\n            files: z.array(\n              z.object({\n                path: z.string(),\n                content: z.string(),\n              }),\n            ),\n          }),\n          handler: async ({ files }, { step, network }) => {\n            /**\n             * {\n             *   /app.tsx: \"<p>hi</p>\",\n             * }\n             */\n\n            const newFiles = await step?.run(\n              \"createOrUpdateFiles\",\n              async () => {\n                try {\n                  const updatedFiles = network.state.data.files || {};\n                  const sandbox = await getSandbox(sandboxId);\n                  for (const file of files) {\n                    await sandbox.files.write(file.path, file.content);\n                    updatedFiles[file.path] = file.content;\n                  }\n\n                  return updatedFiles;\n                } catch (e) {\n                  return \"Error: \" + e;\n                }\n              },\n            );\n\n            if (typeof newFiles === \"object\") {\n              network.state.data.files = newFiles;\n            }\n          },\n        }),\n        createTool({\n          name: \"readFiles\",\n          description: \"Read files from the sandbox\",\n          parameters: z.object({\n            files: z.array(z.string()),\n          }),\n          handler: async ({ files }, { step }) => {\n            return await step?.run(\"readFiles\", async () => {\n              try {\n                const sandbox = await getSandbox(sandboxId);\n                const contents = [];\n                for (const file of files) {\n                  // Prevent hallucination to ensure file exists\n                  const content = await sandbox.files.read(file);\n                  contents.push({ path: file, content });\n                }\n                return JSON.stringify(contents);\n              } catch (e) {\n                return \"Error: \" + e;\n              }\n            });\n          },\n        }),\n      ],\n      lifecycle: {\n        onResponse: async ({ result, network }) => {\n          const lastAssistantMessageText =\n            lastAssistantTextMessageContent(result);\n\n          if (lastAssistantMessageText && network) {\n            if (lastAssistantMessageText.includes(\"<task_summary>\")) {\n              network.state.data.summary = lastAssistantMessageText;\n            }\n          }\n\n          return result;\n        },\n      },\n    });\n\n    const network = createNetwork({\n      name: \"coding-agent-network\",\n      agents: [codeAgent],\n      maxIter: 15,\n      router: async ({ network }) => {\n        const summary = network.state.data.summary;\n        if (summary) {\n          return;\n        }\n        return codeAgent;\n      },\n    });\n\n    const result = await network.run(event.data.value);\n\n    // const { output } = await codeAgent.run(\n    //   `Write the following snippet: ${event.data.value}`,\n    // );\n\n    const sandboxUrl = await step.run(\"get-sandbox-url\", async () => {\n      const sandbox = await getSandbox(sandboxId);\n      const host = sandbox.getHost(3000);\n      return `https://${host}`;\n    });\n\n    return {\n      url: sandboxUrl,\n      title: \"Fragment\",\n      files: result.state.data.files,\n      summary: result.state.data.summary,\n    };\n  },\n);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/amansatyawani/Desktop/website-builder/src/app/api/inngest/route.ts"],"sourcesContent":["import { serve } from \"inngest/next\";\nimport { inngest } from \"@/inngest/client\";\nimport { helloWorld } from \"@/inngest/functions\";\n\n// Create an API that serves zero functions\nexport const { GET, POST, PUT } = serve({\n  client: inngest,\n  functions: [\n    /* your functions will be passed here later! */\n    helloWorld,\n  ],\n});\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAGO,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAA,GAAA,6UAAA,CAAA,QAAK,AAAD,EAAE;IACtC,QAAQ,0HAAA,CAAA,UAAO;IACf,WAAW;QACT,6CAA6C,GAC7C,6HAAA,CAAA,aAAU;KACX;AACH","debugId":null}}]
}